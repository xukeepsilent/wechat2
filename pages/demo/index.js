//index.js
//获取应用实例
var app = getApp()
Page({
    data: {
        // 轮播
        images: [
            '../../image/banner_1.jpg',
            '../../image/banner_2.jpg',
            '../../image/banner_3.jpg',
            '../../image/banner_4.jpg'
        ],
        indicatorDots: true,
        vertical: false,
        autoplay: true,
        interval: 3000,
        duration: 1200,
        // nav
        navs: [{
            image: "../../image/Capsicum_1.png",
            text: '冠军榜'
        }, {
            image: "../../image/Capsicum_2.png",
            text: '最热门'
        }, {
            image: "../../image/Greenstuff.png",
            text: '最实惠'
        }, {
            image: "../../image/cheese.png",
            text: '星推荐'
        }],
        // item
        items: [
            { image: "../../image/list_1.jpg" },
            { image: "../../image/list_2.jpg" },
            { image: "../../image/list_3.jpg" },
            { image: "../../image/list_1.jpg" },
            { image: "../../image/list_2.jpg" },
            { image: "../../image/list_3.jpg" },
            { image: "../../image/list_1.jpg" },
            { image: "../../image/list_2.jpg" }
        ]
    },

    //事件处理函数
    bindViewTap: function() {
        wx.navigateTo({
            url: 'logs/logs'
        })
    },
    swiperchange: function(e) {
        //FIXME: 当前页码
        //console.log(e.detail.current)
    },

    onLoad: function() {
        console.log('onLoad')
        var that = this
            //调用应用实例的方法获取全局数据
        app.getUserInfo(function(userInfo) {
            //更新数据
            that.setData({
                userInfo: userInfo
            })
        })
    },
    go: function(event) {
        wx.navigateTo({
            url: 'lists/index?type=' + event.currentTarget.dataset.type,
            success: function(res) {
                console.log('跳转到news页面成功') // success
            },
            fail: function() {
                console.log('跳转到news页面失败') // fail 
            },
            complete: function() {
                console.log('跳转到news页面完成') // complete
            }
        })
    }
})
